<!DOCTYPE html>
<html lang="es">
  <head>
    <title>404 - Not Found</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta charset="utf-8" />
    <meta property="twitter:card" content="summary_large_image" />

    <style data-tag="reset-style-sheet">
      html {  line-height: 1.15;}body {  margin: 0;}* {  box-sizing: border-box;  border-width: 0;  border-style: solid;  -webkit-font-smoothing: antialiased;}p,li,ul,pre,div,h1,h2,h3,h4,h5,h6,figure,blockquote,figcaption {  margin: 0;  padding: 0;}button {  background-color: transparent;}button,input,optgroup,select,textarea {  font-family: inherit;  font-size: 100%;  line-height: 1.15;  margin: 0;}button,select {  text-transform: none;}button,[type="button"],[type="reset"],[type="submit"] {  -webkit-appearance: button;  color: inherit;}button::-moz-focus-inner,[type="button"]::-moz-focus-inner,[type="reset"]::-moz-focus-inner,[type="submit"]::-moz-focus-inner {  border-style: none;  padding: 0;}button:-moz-focus,[type="button"]:-moz-focus,[type="reset"]:-moz-focus,[type="submit"]:-moz-focus {  outline: 1px dotted ButtonText;}a {  color: inherit;  text-decoration: inherit;}input {  padding: 2px 4px;}img {  display: block;}details {  display: block;  margin: 0;  padding: 0;}summary::-webkit-details-marker {  display: none;}[data-thq="accordion"] [data-thq="accordion-content"] {  max-height: 0;  overflow: hidden;  transition: max-height 0.3s ease-in-out;  padding: 0;}[data-thq="accordion"] details[data-thq="accordion-trigger"][open] + [data-thq="accordion-content"] {  max-height: 300vh;}details[data-thq="accordion-trigger"][open] summary [data-thq="accordion-icon"] {  transform: rotate(180deg);}html { scroll-behavior: smooth  }
    </style>
    <style data-tag="default-style-sheet">
      html {
        font-family: Inter;
        font-size: 16px;
      }

      body {
        font-weight: 400;
        font-style:normal;
        text-decoration: none;
        text-transform: none;
        letter-spacing: normal;
        line-height: 1.15;
        color: var(--dl-color-theme-neutral-dark);
        background: var(--dl-color-theme-neutral-light);

        fill: var(--dl-color-theme-neutral-dark);
      }
    </style>
    <link
      rel="stylesheet"
      href="https://unpkg.com/animate.css@4.1.1/animate.css"
    />
    <link
      rel="shortcut icon"
      href="public/logo.png"
      type="icon/png"
      sizes="32x32"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Inter:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Hepta+Slab:wght@100;200;300;400;500;600;700;800;900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Bodoni+Moda:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Comic+Neue:ital,wght@0,300;0,400;0,700;1,300;1,400;1,700&amp;display=swap"
      data-tag="font"
    />
    <link
      rel="stylesheet"
      href="https://unpkg.com/@teleporthq/teleport-custom-scripts/dist/style.css"
    />
    <!--This is the head section-->
    <style>
      .instagramImageContainerEscritorio img, .instagramImageContainerMovil img{
          border-radius: 8px;
          border: 1px solid rgba(187, 187, 187, 1);
          object-fit: cover;
          display: inline;
          width: 100%;
      }
      .review-card{
          display: flex;
          gap: 16px;
          flex-direction:column;
      }
      .review-card img{
          width:64px;
      }
      .content-text-revews{
          display: flex;
          flex-direction: column;
          gap: 8px;
          line-height: 1.5;
      }
      .content-text-revews div, .content-text-revews a{
          font-size: 1.1rem;
          font-weight:bold;
      }

      /* Efecto de "brillo" */
      .shine {
          width: 100%; /* Ancho del brillo */
          height: 100%; /* Alto del brillo */
          background: linear-gradient(90deg,
              rgba(255, 255, 255, 0) 0%,
              rgba(255, 255, 255, 0.5) 50%,
              rgba(255, 255, 255, 0) 100%);
          position: absolute;
          top: 0;
          left: -100%; /* Empieza fuera del contenedor */
          animation: shine-animation 1s infinite; /* Animación */
      }

      /* Animación del brillo */
      @keyframes shine-animation {
          0% {
              left: -100%;
          }
          100% {
              left: 100%;
          }
      }

      @media (orientation: landscape) {
          .review-card{
              flex: 0 1 calc(50% - 32px);
              flex-direction:row;
          }
      }
    </style>
  </head>
  <body>
    <link rel="stylesheet" href="./style.css" />
    <div>
      <link href="./404.css" rel="stylesheet" />

      <div class="not-found-container1">
        <h3>OOPS! PAGE NOT FOUND</h3>
        <div class="not-found-container2">
          <h1 class="not-found-text2">404</h1>
        </div>
        <div class="not-found-container3">
          <h2 class="not-found-text3">
            WE ARE SORRY, BUT THE PAGE YOU REQUESTED WAS NOT FOUND
          </h2>
        </div>
      </div>
    </div>
    <script type="text/javascript">
      (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
              new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
              j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
              'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
              })(window,document,'script','dataLayer','GTM-TM8FZ626');
    </script>
    <script type="text/javascript">
      const firebaseFunctionUrl = 'https://us-central1-mosqueda-cordova-992b2.cloudfunctions.net/getInstagramImages'; // URL de tu función de Firebase

      // Función para actualizar los mensajes de carga y error
      function updateLoadingMessage(isLoading, container, message = '', targetContainer = null) {
          container.style.display = isLoading || message ? 'block' : 'none';
          container.classList.toggle('shine', isLoading);
          container.innerHTML = message;

          if (targetContainer) {
              targetContainer.style.background = isLoading ? '' : 'none';
          }
      }

      async function fetchInstagramImages() {
          const instagramLoadingImgMessageEscritorio = document.getElementById('instagramLoadingImgMessageEscritorio');
          const instagramLoadingImgMessageMovil = document.getElementById('instagramLoadingImgMessageMovil');
          const instagramImageContainerEscritorio = document.getElementById('instagramImageContainerEscritorio');
          const instagramImageContainerMovil = document.getElementById('instagramImageContainerMovil');

          // Mostrar carga
          updateLoadingMessage(true, instagramLoadingImgMessageEscritorio);
          updateLoadingMessage(true, instagramLoadingImgMessageMovil);

          try {
              const response = await fetch(firebaseFunctionUrl);
              const data = await response.json();

              // Verificar si hay imágenes
              if (data && data.length > 0) {
                  const imagesToShow = data.slice(0, 6); // Limitar a las primeras 6 imágenes

                  // Función para agregar imágenes a los contenedores
                  const addImagesToContainer = (container) => {
                      container.innerHTML = ''; // Limpiar contenedor antes de agregar nuevas imágenes
                      imagesToShow.forEach(item => {
                          const imgElement = document.createElement('img');
                          imgElement.src = item.media_url;
                          imgElement.alt = 'Instagram Image';
                          container.appendChild(imgElement);
                      });
                  };

                  // Agregar imágenes a ambos contenedores
                  addImagesToContainer(instagramImageContainerEscritorio);
                  addImagesToContainer(instagramImageContainerMovil);

                  // Ocultar mensajes de carga
                  updateLoadingMessage(false, instagramLoadingImgMessageEscritorio, '', instagramImageContainerEscritorio);
                  updateLoadingMessage(false, instagramLoadingImgMessageMovil, '', instagramImageContainerMovil);
              } else {
                  // Mensaje cuando no se encuentran imágenes
                  updateLoadingMessage(false, instagramLoadingImgMessageEscritorio, 'No se encontraron imágenes.');
                  updateLoadingMessage(false, instagramLoadingImgMessageMovil, 'No se encontraron imágenes.');
              }
          } catch (error) {
              console.error('Error al obtener las imágenes:', error);
              // Mostrar mensaje de error
              updateLoadingMessage(false, instagramLoadingImgMessageEscritorio, 'Error al cargar imágenes.');
              updateLoadingMessage(false, instagramLoadingImgMessageMovil, 'Error al cargar imágenes.');
          }
      }

      // URL de tu servicio
      const reviewApiUrl = 'https://us-central1-mosqueda-cordova-992b2.cloudfunctions.net/getReviews';

      async function fetchReviews() {
              try {
                  const response = await fetch(reviewApiUrl);
                  const data = await response.json();

                  if (data.reviews && data.reviews.length > 0) {
                      const reviewsContainer = document.getElementById('reviews-container');

                      data.reviews.forEach(review => {
                          const reviewCard = document.createElement('div');
                          reviewCard.classList.add('review-card');

                          // Limitar la longitud del texto de la reseña
                          const maxLength = 100; // Cambia este valor según la longitud deseada
                          const truncatedText = review.text.length > maxLength
                              ? review.text.substring(0, maxLength) + '...'
                              : review.text;

                          reviewCard.innerHTML = `
                              <div>
                                  <img src="${review.profile_photo_url}" alt="${review.author_name}">
                              </div>
                              <div class="content-text-revews">
                                  <div>${review.author_name}</div>
                                  <p>${truncatedText}</p>
                                  <a href="https://maps.app.goo.gl/TtC437T2MnumiJ7S7" target="_blank">
                                      Ver completa
                                  <a>
                              </div>
                          `;

                          reviewsContainer.appendChild(reviewCard);
                      });
                  } else {
                      document.getElementById('reviews-container').innerHTML = 'No se encontraron reseñas.';
                  }
              } catch (error) {
                  console.error('Error al obtener las reseñas:', error);
                  document.getElementById('reviews-container').innerHTML = 'Error al cargar reseñas.';
              }
      }

       // Llamar a ambas funciones cuando se cargue la página
       window.onload = () => {
          fetchInstagramImages();
          fetchReviews();
      };
    </script>
  </body>
</html>
